## Backbone модель дерева слоёв

Инициализируется из исходного описания карты ГеоМиксера:
```javascript
var tree = new nsGmx.LayersTreeNode({content: rawMapInfo.Result});
```

Вторым параметром дерева слоёв можно указывать непосредственного родителя этой ноды.

`id` модели соответствует имени слоя или группы в описании карты.

#### Атрибуты ноды дерева
  * `parent` - родительская нода
  * `visible` - признак видимости ноды
  * `list` - можно ли включать потомков по одному (true) или в произвольном количестве (false)
  * `childrenNodes` - Backbone коллекция дочерних узлов
  * `properties` - исходные свойства узла из описания карты
  * `expanded` - признак развёрнутости группы
  * `depth` - глубина ноды в дереве (0 - корень)
  * `geometry` - геометрия узла из описания карты (в формате ГеоМиксера). Только для слоёв

#### Методы
  * `find(id)` - возвращает ноду из поддерева с заданным `id`
  * `saveState()` - сохранение состояния видимости и развёрнутости узлов дерева
  * `loadState(state, applyInitialState)` - загрузка состояния видимости и развёрнутости. Состояние видимости нелистовых нод однозначно устанавливается по состоянию листовых. Если `applyInitialState = true`, то узлы дерева, информации о которых нет в `state`, будут приведены в начальное состояние (иначе их текущее состояние не изменится)
  * `eachNode(visitor, onlyLeaves)` - итерирование по всем нодам дерева.
  `visitor` - ф-ция, которая будет вызвана для каждой ноды (нода - первый параметр). `onlyLeaves = true` - итерировать только по листовым нодам
  * `getBounds` - получить bounding box ноды. Для групп объединяет геометрию всех слоёв в поддереве. Возвращает `L.Bounds` в проекции Меркатор (EPSG:3395, L.Projection.Mercator). Работает только если есть Leaflet.
  * `getLatLngBounds` - аналогично `getBounds()`, но возвращает `L.LatLngBounds` - bounding box ноды в географических координатах. Работает только если есть Leaflet.
  * `select(filterFunc)` - получить массив нод из поддерева данной ноды (включая её саму). `filterFunc(node)->Boolean` - ф-ция для фильтрации массива нод.
  * `isLastInLevel` - является ли данная нода последней на своём уровне (полезно при визуализации)

#### Формат данных при сериализации
Хеш со следующими объектами для каждой ноды (id ноды - ключ хеша):
  * `visible` - признак видимости ноды (только для листовых нод)
  * `expanded` - признак развёрнутости ноды (только для нелистовых нод)

#### Дополнительные события
  * `childChange` - произошли изменения в одном из потомков данной ноды. Первый аргумент - изменившаяся нода.